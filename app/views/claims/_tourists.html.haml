#tourists.form_block
  .block_title
    %h2= t('.tourists')
  .form_block_content
    .fake_table
      - if small_width?
        %span.fio= t('.full_name')
        %span.dob= t('.date_of_birth')
        %span.passport= t('.passport')
        %span.expires= t('.passport_expire')
        %span.tel= t('.phone')
        %span.tourist_address= t('.address')
      - elsif medium_width?
        %span.fio= t('.full_name')
        %span.dob= t('.date_of_birth')
        %span.passport= t('.passport')
        %span.expires= t('.passport_expire')

    = f.fields_for :applicant_attributes, @claim.applicant do |af|
      .fake_row.applicant.fields
        - if small_width?
          / %p= t('.tourists_full_name_hint') + ':'
          %span.common_fields
            = render :partial => 'tourist', :locals => { :f => af }

          = af.text_field :phone_number, :class => 'phone_number phone'
          = af.text_field :address, :value => af.object.address.try(:joint_address), :class => 'address'
          = link_to '', '#', :class => 'delete', :id => "del1"
        - else
          %p= t('.tourists_full_name_hint') + ':'
          %span.common_fields
            = render :partial => 'tourist', :locals => { :f => af }
            = link_to '', '#', :class => 'delete', :title => t('delete'), data: { check: t('are_you_sure') }

          = af.label :phone_number, t('.phone') + ':'
          = af.text_field :phone_number, :class => 'phone_number phone'
          = af.label :address, t('.address') + ':', :class => 'address_label'
          = af.text_field :address, :value => af.object.address.try(:joint_address), :class => 'address'
        = af.hidden_field :id, :class => 'hidden_id'

    - ind = 0
    = f.fields_for :dependents do |df|
      .fake_row.dependent.fields{ :id => "dependent-#{ind}", :class => df.object.try(:_destroy) && 'destroyed' }
        = render :partial => 'tourist', :locals => { :f => df, :ind => ind }
        = link_to '', '#', :class => 'delete', :title => t('delete'), data: { check: t('are_you_sure') }

        = df.hidden_field :_destroy, :class => '_destroy'
        = df.hidden_field :id, :class => 'hidden_id'
        -# tourist_claim = @claim.tourist_claims.select{ |r| r.tourist_id == df.object.id }.first
        - tourist_claim = @claim.tourist_claims.select{ |r| r.tourist_id == df.object.id }.first
        - if tourist_claim
          = df.hidden_field :tourist_claim_id, :value => tourist_claim.id
      - ind += 1

    .fake_row.add_row
      .add_btn
        = link_to t('.add_another_tourist'), '#', :class => 'add add_tourist'