%tr{:id => "task-#{task.id}", :class => task.bug && 'bug'}
  %td{ :class => task.bug && 'red_back' }
    = task.id
  %td.body.popup_hover{:class => task.status =='cancel' && 'del', :title => "\##{task.id} - #{t('task_type.' + (task.bug ? 'bug' : 'offer'))}", :data => { :content => task.body }}
    = truncate task.body, length: 80, omission: '...', separator: ' '
  %td
    = task.user.login
  %td
    = task.executer.login rescue nil
  %td
    = t("tasks.#{task.status}")
  %td
    = l(task.start_date, format: :long)
  %td
    = l(task.end_date, format: :long)
  %td
    = label_tag :"bug_#{task.id}", '&nbsp;'.html_safe, class: "checkbox #{'active' if task.bug}"
    = check_box_tag :"bug_#{task.id}", task.id, task.bug, class: 'bug_checkbox'
  %td.take
    = link_to t('tasks.take'), to_user_task_path(task), class: 'btn btn-success', remote: true
    = link_to t('tasks.finish'), finish_task_path(task), class: 'btn btn-danger finish_task',  remote: true
    = link_to t('tasks.can—Åel'), cancel_task_path(task), class: 'btn btn-primary cancel_task',  remote: true