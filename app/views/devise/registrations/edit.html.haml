%h2 Изменение профиля #{resource_name.to_s.humanize}

= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f|
  = devise_error_messages!
  %p
    = f.label :first_name
    %br
    = f.text_field :first_name
  %p
    = f.label :last_name
    %br
    = f.text_field :last_name
  %p
    = f.label :middle_name
    %br
    = f.text_field :middle_name
  %p
    = f.label :email
    %br
    = f.email_field :email
  - if current_user.role == 'admin'
    %p
      = f.label :role
      %br
      = f.collection_select :role, User::ROLES, :to_s, :humanize
    %p
      = f.label :company_id
      %br
      = f.collection_select :company_id, Company.all, :id, :name
  - else
    = @user.role
    = @user.company.try(:name)
  %p
    = f.label :office_id
    %br
    = f.select :office_id, Office.all.collect {|o| [ o.name, o.id ] }

  %p
    = f.label :color
    %br
    .color_sample
    = f.select :color, User.available_colors

  %P
    = f.label :password
    %i Оставьте пустым, если не хотите менять)
    %br
    = f.password_field :password

  %p
    = f.label :password_confirmation
    %br
    = f.password_field :password_confirmation

  %p
    = f.label :current_password
    %i (действующий пароль для подтверждения изменений)
    %br
    = f.password_field :current_password

  %p
    = f.submit

- if is_admin?
  %h3 Удаление аккаунта

  %p= link_to "Удалить аккаунт", registration_path(resource_name), :confirm => "Are you sure?", :method => :delete

= link_to "Назад", :back
